import{r as c,j as e,G as i,T as C,B as g,R,F as w,I as M,S as T,M as U,a as I,u as N,b as W,c as D,d as G,N as y,e as z,C as B,f as _,l as k,g as O,h as q}from"./index-a584ef0b.js";import{L as m}from"./LoginPage-dd7008aa.js";import{O as Q}from"./OneTimePasscodeForm-3ebdc5c0.js";const A=({onSubmit:o,onLoginViaSAML:l,loading:s=!1})=>{const[a,u]=c.useState(""),[d,t]=c.useState(""),j=async r=>{r.preventDefault(),o(a,d)};return e.jsx("form",{onSubmit:j,children:e.jsxs(i,{container:!0,spacing:4,justifyContent:"center",children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(C,{id:"username",name:"username",label:"Email Address",fullWidth:!0,variant:"outlined",value:a,onChange:r=>u(r.target.value),autoFocus:!0})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(C,{id:"password",name:"password",label:"Password",type:"password",fullWidth:!0,variant:"outlined",value:d,onChange:r=>t(r.target.value)})}),e.jsx(i,{item:!0,xs:8,children:e.jsx(g,{variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,disableElevation:!0,disabled:s,children:s?"LOGGING IN":"LOGIN"})}),l!==void 0&&e.jsx(i,{item:!0,xs:8,children:e.jsx(g,{variant:"contained",color:"neutral",size:"large",type:"button",fullWidth:!0,disableElevation:!0,onClick:l,disabled:s,children:"LOGIN VIA SSO"})})]})})},V=({providers:o,onSubmit:l,onCancel:s})=>{const[a,u]=R.useState(""),d=t=>{t.preventDefault(),a!==null&&l(a)};return e.jsx("form",{onSubmit:d,children:e.jsxs(i,{container:!0,spacing:4,justifyContent:"center",children:[e.jsx(i,{item:!0,xs:12,children:e.jsxs(w,{variant:"outlined",children:[e.jsx(M,{id:"selected-saml-provider-label",children:"Choose your SSO Provider"}),e.jsx(T,{labelId:"selected-saml-provider-label",id:"selected-saml-provider",value:a,label:"Choose your SSO Provider",onChange:t=>u(t.target.value),fullWidth:!0,children:o.map(t=>e.jsx(U,{value:t.initiation_url,children:t.name},t.name))})]})}),e.jsxs(i,{item:!0,xs:8,children:[e.jsx(g,{variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0,disableElevation:!0,disabled:a==="",children:"CONTINUE"}),e.jsx(I,{mt:2,children:e.jsx(g,{color:"inherit",onClick:s,variant:"contained",size:"large",type:"button",fullWidth:!0,disableElevation:!0,children:"CANCEL"})})]})]})})},Z=()=>{var f,b,L,v,E;const o=N(),l=W(),s=D(n=>n.auth),[a,u]=c.useState(!1),[d,t]=c.useState(""),[j,r]=c.useState("");c.useEffect(()=>{l.clear()},[l]);const h=G(["listSAMLSignOnEndpoints"],({signal:n})=>q.listSAMLSignOnEndpoints({signal:n}).then(x=>x.data.data.endpoints)),S=()=>{u(!1),t(""),r(""),o(k())},p=async(n,x)=>{t(n),r(x),o(O({username:n,password:x}))},P=async n=>{o(O({username:d,password:j,otp:n}))},F=n=>{window.location.assign(n)};return s.sessionToken!==null&&s.user!==null?e.jsx(y,{to:z}):h.isLoading?e.jsx(m,{children:e.jsx(I,{textAlign:"center",children:e.jsx(B,{})})}):((b=(f=s.loginError)==null?void 0:f.response)==null?void 0:b.status)===403||!1?e.jsx(y,{to:_}):((v=(L=s.loginError)==null?void 0:L.response)==null?void 0:v.status)===400||!1?e.jsx(m,{children:e.jsx(Q,{onSubmit:P,onCancel:S,loading:s.loginLoading})}):h.isError||((E=h.data)==null?void 0:E.length)===0?e.jsx(m,{children:e.jsx(A,{onSubmit:p,loading:s.loginLoading})}):a?e.jsx(m,{children:e.jsx(V,{providers:h.data,onSubmit:F,onCancel:S})}):e.jsx(m,{children:e.jsx(A,{onSubmit:p,onLoginViaSAML:()=>u(!0),loading:s.loginLoading})})};export{Z as default};
