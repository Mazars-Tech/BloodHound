import{Y as y,cV as _,r as B,j as e,b2 as R,G as x,cW as b,T as D,a as j,B as m,s as E,b3 as F,A as H,b4 as N,b0 as U,b1 as q,q as v,cK as I,cL as V,cH as h,cI as s,cM as W,aK as n,bT as z}from"./index-a584ef0b.js";import{T as k}from"./TableContainer-2d43236c.js";const w=({error:r,onClose:i,onSubmit:l})=>{const a=y(),{control:o,handleSubmit:g,reset:T,formState:{errors:d}}=_({defaultValues:{name:"",metadata:void 0}}),[C,u]=B.useState(""),f=()=>{i(),u(""),T()};return e.jsxs("form",{onSubmit:g(l),children:[e.jsx(R,{children:e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:12,children:e.jsx(b,{control:o,name:"name",rules:{required:"SAML Provider Name is required",pattern:{value:/^[a-z0-9]+(?:-[a-z0-9]+)*$/,message:'SAML Provider Name must be a valid URL slug (e.g., "saml-provider", "test-idp-01", "any-old-slug")'}},render:({field:t})=>{var c;return e.jsx(D,{...t,id:"name",variant:"standard",fullWidth:!0,name:"name",label:"SAML Provider Name",error:!!d.name,helperText:((c=d.name)==null?void 0:c.message)||"Choose a name for your SAML Provider configuration"})}})}),e.jsxs(x,{item:!0,xs:12,children:[e.jsx(b,{control:o,name:"metadata",rules:{required:"Metadata is required"},render:({field:t})=>{var c;return e.jsx(j,{p:1,borderRadius:4,bgcolor:a.palette.grey[200],children:e.jsxs(j,{display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsxs(m,{color:"inherit",component:"label",variant:"contained",disableElevation:!0,size:"small",sx:{px:"1em"},children:["Choose File",e.jsx("input",{hidden:!0,type:"file",accept:".xml",value:C,onChange:p=>{u(p.target.value),t.onChange(p.target.files)},onBlur:t.onBlur})]}),e.jsx(j,{ml:1,children:e.jsx(E,{variant:"body1",children:(c=t.value)!=null&&c[0]?t.value[0].name:"No file chosen"})})]})})}}),e.jsx(F,{error:!!d.metadata,children:d.metadata?d.metadata.message:"Upload the Metadata file provided by your SAML Provider"})]}),r&&e.jsx(x,{item:!0,xs:12,children:e.jsx(H,{severity:"error",children:r})})]})}),e.jsxs(N,{children:[e.jsx(m,{color:"inherit",onClick:f,"data-testid":"create-saml-provider-dialog_button-close",children:"Cancel"}),e.jsx(m,{type:"submit",color:"primary","data-testid":"create-saml-provider-dialog_button-save",children:"Submit"})]})]})},O=({open:r,error:i,onClose:l,onSubmit:a})=>e.jsxs(U,{open:r,onClose:l,fullWidth:!0,maxWidth:"sm",PaperProps:{"data-testid":"create-saml-provider-dialog"},children:[e.jsx(q,{children:"Create SAML Provider"}),e.jsx(w,{error:i,onClose:l,onSubmit:a})]}),Y=({SAMLProviders:r,loading:i,onDeleteSAMLProvider:l})=>e.jsx(v,{children:e.jsx(k,{children:e.jsxs(I,{children:[e.jsx(V,{children:e.jsxs(h,{children:[e.jsx(s,{children:"Provider Name"}),e.jsx(s,{children:"IdP SSO URL"}),e.jsx(s,{children:"BHE SSO URL"}),e.jsx(s,{children:"BHE ACS URL"}),e.jsx(s,{children:"BHE Metadata URL"}),e.jsx(s,{})]})}),e.jsx(W,{children:i?e.jsxs(h,{children:[e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})}),e.jsx(s,{children:e.jsx(n,{})})]}):r.length===0?e.jsx(h,{children:e.jsx(s,{colSpan:6,align:"center",children:"No SAML Providers found"})}):r.map((a,o)=>e.jsxs(h,{children:[e.jsx(s,{children:a==null?void 0:a.name}),e.jsx(s,{children:a==null?void 0:a.idp_sso_uri}),e.jsx(s,{children:a==null?void 0:a.sp_sso_uri}),e.jsx(s,{children:a==null?void 0:a.sp_acs_uri}),e.jsx(s,{children:a==null?void 0:a.sp_metadata_uri}),e.jsx(s,{align:"right",children:e.jsx(z,{SAMLProviderId:a.id,onDeleteSAMLProvider:l})})]},o))})]})})});export{O as C,Y as S,w as a};
