import{u as f,r as n,d as h,bL as m,j as r,a as u,B as x,h as d,aY as y}from"./index-a584ef0b.js";import{C}from"./ConfirmationDialog-e2da8cb5.js";import{C as j}from"./ContentPage-b5dcd0a0.js";import{S as D,C as b}from"./SAMLProviderTable-3e695f94.js";import{u as w}from"./useToggle-e96e3749.js";import"./TableContainer-2d43236c.js";const E=()=>{const S=f(),[A,L]=n.useState(""),[M,l]=n.useState(!1),[v,i]=w(!1),[p,s]=n.useState(""),t=h(["listSAMLProviders"],({signal:e})=>d.listSAMLProviders({signal:e}).then(o=>o.data.data.saml_providers)),a=m(e=>d.deleteSAMLProvider(e),{onSuccess:()=>{S(y("SAML Provider successfully deleted!","deleteSAMLProviderSuccess"))}}),P=()=>{l(!0)},c=()=>{l(!1),s("")},g=async e=>{s("");try{await d.createSAMLProviderFromFile({...e,metadata:e.metadata[0]}),t.refetch(),c()}catch(o){console.error(o),s("Unable to create new SAML Provider configuration. Please try again.")}};return r.jsxs(r.Fragment,{children:[r.jsx(j,{title:"SAML Configuration",children:r.jsxs(u,{children:[r.jsxs(u,{display:"flex",justifyContent:"space-between",mb:2,children:[r.jsx("div",{}),r.jsx(x,{color:"primary",variant:"contained",disableElevation:!0,onClick:P,children:"Create SAML Provider"})]}),r.jsx(D,{SAMLProviders:t.data||[],loading:t.isLoading,onDeleteSAMLProvider:e=>{L(e),i()}})]})}),r.jsx(b,{open:M,error:p,onClose:c,onSubmit:g}),r.jsx(C,{open:v,title:"Delete SAML Provider",text:"Are you sure you wish to delete this SAML Provider? Any users which are currently configured to use this provider for authentication will no longer be able to access this application.",onClose:async e=>{if(e)try{await a.mutateAsync(A),i(),t.refetch()}catch(o){console.error(o)}else i();a.reset()},error:a.isError?"An unexpected error has occurred. Please try again.":"",isLoading:a.isLoading})]})},R=E;export{R as default};
